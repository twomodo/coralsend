# CoralSend environment variables (example)
# Copy to .env or .env.production and replace with real values.
#
# Usage:
# - deploy/docker-compose.prod.yml loads per-service env files from deploy/.env.*.
# - deploy/docker-compose.dokploy.yml reads all variables from Dokploy env (no env_file).
#
# Notes:
# - TURN domain should be DNS only unless you use Cloudflare Spectrum.
# - All NEXT_PUBLIC_* values are baked into the web image at build time.
# - Variables marked (required) have no compose default and MUST be set.
# - Variables marked (optional) have a compose default; override only if needed.

# ==============================================================================
# server service
# ==============================================================================

# Container image tag (optional; default: ghcr.io/alifakhimi/coralsend-server:latest)
SERVER_IMAGE=ghcr.io/alifakhimi/coralsend-server:latest

# Internal port exposed by signaling server; also used for healthcheck URL (optional; default: 8080)
SERVER_PORT=8080

# Healthcheck timing (optional; defaults: 30s / 5s / 5 / 10s)
SERVER_HEALTHCHECK_INTERVAL=30s
SERVER_HEALTHCHECK_TIMEOUT=5s
SERVER_HEALTHCHECK_RETRIES=5
SERVER_HEALTHCHECK_START_PERIOD=10s

# ==============================================================================
# web service
# ==============================================================================

# Container image tag (optional; default: ghcr.io/alifakhimi/coralsend-web:latest)
WEB_IMAGE=ghcr.io/alifakhimi/coralsend-web:latest

# Port for Next.js standalone server (used for both runtime PORT and expose) (optional; default: 3000)
WEB_PORT=3000

# Runtime binding (optional; default: 0.0.0.0)
WEB_HOSTNAME=0.0.0.0

# Subpath deployment (optional; default: empty = domain root)
NEXT_PUBLIC_BASE_PATH=/coralsend

# Public site URL for canonical URLs, sitemap, robots, metadataBase (required)
NEXT_PUBLIC_SITE_URL=https://coralsend.example.com

# App version shown in UI/footer/changelog (optional; fallback: package.json version)
NEXT_PUBLIC_APP_VERSION=0.1.0

# WebSocket signaling URL used by browser clients (required)
NEXT_PUBLIC_SIGNALING_URL=wss://example.com/ws

# WebRTC ICE — STUN/TURN endpoints and credentials (required)
NEXT_PUBLIC_STUN_URL=stun:stun.example.com:3478
NEXT_PUBLIC_TURN_URL=turn:turn.example.com:3478?transport=udp
NEXT_PUBLIC_TURN_USER=coralsend
NEXT_PUBLIC_TURN_PASS=change-me

# ICE diagnostics in browser console (optional; default: false)
NEXT_PUBLIC_ICE_DIAGNOSTICS=false

# Social links (optional; default: empty)
NEXT_PUBLIC_GITHUB_URL=https://github.com/twomodo/coralsend
# NEXT_PUBLIC_TWITTER_URL=
# NEXT_PUBLIC_TELEGRAM_URL=
# NEXT_PUBLIC_INSTAGRAM_URL=
# NEXT_PUBLIC_LINKEDIN_URL=

# PostHog analytics (optional; leave empty to disable)
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://eu.i.posthog.com

# ==============================================================================
# coturn service
# ==============================================================================

# Container image tag (optional; default: coturn/coturn:4.8.0)
COTURN_IMAGE=coturn/coturn:4.8.0

# Listening address and port ranges (optional; defaults: 0.0.0.0 / 3478 / 49160 / 49200)
COTURN_LISTENING_IP=0.0.0.0
COTURN_LISTENING_PORT=3478
COTURN_MIN_PORT=49160
COTURN_MAX_PORT=49200

# TURN realm — should match your TURN DNS name (required)
TURN_REALM=coralsend.example.com

# Static long-term credentials (required)
TURN_USER=coralsend
TURN_PASSWORD=change-me

# Public server IP for relayed candidates (required)
TURN_EXTERNAL_IP=203.0.113.10

# ==============================================================================
# nginx service (docker-compose.prod.yml only)
# ==============================================================================

# Container image tag (optional; default: nginx:1.27.4)
NGINX_IMAGE=nginx:1.27.4

# Published HTTP port on host (optional; default: 80)
NGINX_HTTP_PORT=80
