FROM registry.sikapp.ir/node:22.13.1-bullseye

WORKDIR /app

ARG NEXT_PUBLIC_SIGNALING_URL
ARG NEXT_PUBLIC_BASE_PATH
ENV NEXT_PUBLIC_SIGNALING_URL=${NEXT_PUBLIC_SIGNALING_URL:-}
ENV NEXT_PUBLIC_BASE_PATH=${NEXT_PUBLIC_BASE_PATH:-}
ENV NODE_ENV=production

RUN echo $NEXT_PUBLIC_SIGNALING_URL

COPY deploy/docker-containers/web/app/ ./

EXPOSE 3000
CMD ["node", "server.js"]